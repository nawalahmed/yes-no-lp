(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78830,e=>{"use strict";var a=e.i(43476),s=e.i(71645);function l(){let[e,l]=(0,s.useState)(""),[i,t]=(0,s.useState)("Will you be my valentine?"),[n,r]=(0,s.useState)(!1),[c,o]=(0,s.useState)(null),[d,h]=(0,s.useState)(null),[u,m]=(0,s.useState)("no");async function x(){if(n)return;h(null),o(null);let a=e.trim().slice(0,80),s=i.trim().slice(0,200);if(!a||!s)return void h("Please fill in all fields.");r(!0);try{let e=await fetch("/api/create",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",cache:"no-store",body:JSON.stringify({recipientName:a,question:s,dodgeButton:u})});if(!e.ok){let a=await e.text();if(401===e.status||403===e.status)throw Error("Please subscribe first, then try again.");throw Error(a||"Failed to create link.")}let l=await e.json(),i=`${window.location.origin}/p/${l.id}`;o(i)}catch(e){h(e?.message||"Something went wrong.")}finally{r(!1)}}return(0,a.jsx)("main",{className:"page",children:(0,a.jsxs)("section",{className:"hero",children:[(0,a.jsx)("h1",{className:"title",children:"Create a link"}),(0,a.jsx)("p",{className:"subtitle",children:"Personalize it. Share it."}),(0,a.jsx)("div",{className:"cardWrap",children:(0,a.jsxs)("div",{className:"card minimal",children:[(0,a.jsxs)("div",{className:"stack",children:[(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label light",children:"Recipient name"}),(0,a.jsx)("input",{type:"text",className:"inputGhost",placeholder:"Enter their name",value:e,onChange:e=>l(e.target.value),autoComplete:"off",maxLength:80})]}),(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label light",children:"Question"}),(0,a.jsx)("textarea",{rows:2,className:"inputGhost textareaGhost",value:i,onChange:e=>t(e.target.value),maxLength:200})]}),(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label light",children:"Recipient will struggle to click?"}),(0,a.jsxs)("label",{className:"radioRow",children:[(0,a.jsx)("input",{type:"radio",name:"dodge",checked:"no"===u,onChange:()=>m("no")}),(0,a.jsx)("span",{className:"radioText",children:"No"})]}),(0,a.jsxs)("label",{className:"radioRow",children:[(0,a.jsx)("input",{type:"radio",name:"dodge",checked:"yes"===u,onChange:()=>m("yes")}),(0,a.jsx)("span",{className:"radioText",children:"Yes"})]})]})]}),(0,a.jsx)("button",{className:"btnPrimary full",type:"button",onClick:x,disabled:n,children:n?"Creating...":"Create link"}),d?(0,a.jsx)("div",{className:"errorText",children:d}):null,c?(0,a.jsxs)("div",{className:"successBox",children:[(0,a.jsx)("div",{className:"successTitle",children:"Your link is ready"}),(0,a.jsx)("a",{className:"successLinkAnchor",href:c,target:"_blank",rel:"noopener noreferrer",children:c}),(0,a.jsxs)("div",{className:"successRow",children:[(0,a.jsx)("button",{className:"btnGhost",type:"button",onClick:()=>navigator.clipboard.writeText(c),children:"Copy link"}),(0,a.jsx)("a",{className:"btnPrimary",href:c,target:"_blank",rel:"noopener noreferrer",children:"Open link"})]})]}):null,(0,a.jsx)("div",{className:"finePrint",children:(0,a.jsx)("a",{className:"footerLink",href:"/",children:"Back to home"})})]})})]})})}e.s(["default",()=>l])}]);