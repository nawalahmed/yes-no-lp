(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,n)=>{t.exports=e.r(76562)},64707,e=>{"use strict";var t=e.i(43476),n=e.i(18566),r=e.i(71645);function i(e,t,n){return Math.max(t,Math.min(n,e))}function o(){let e=(0,n.useRouter)(),o=(0,n.useParams)(),a=(0,r.useMemo)(()=>{let e=o?.id;return e?Array.isArray(e)?e[0]:e:""},[o]),[s,u]=(0,r.useState)(""),[l,c]=(0,r.useState)(null),[d,h]=(0,r.useState)(!1),[m,f]=(0,r.useState)("no"),[y,x]=(0,r.useState)(!1),w=(0,r.useRef)(!1),p=(0,r.useRef)(null),b=(0,r.useRef)(null),g=(0,r.useRef)(null),v=(0,r.useRef)(null),N=(0,r.useRef)({x:0,y:0,has:!1}),C=(0,r.useRef)({x:0,y:0}),j=(0,r.useMemo)(()=>"yes"===m?p:g,[m]),R=(0,r.useMemo)(()=>"yes"===m?b:v,[m]);async function S(t){if(a)try{h(!0);let n=new URLSearchParams;n.set("id",a),n.set("answer",t);let r=await fetch("/api/answer",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:n.toString(),cache:"no-store"});if(!r.ok){let e=await r.text().catch(()=>"")||"Could not submit. Try again.";h(!1),alert(e);return}e.push(`/r/${a}`)}catch{h(!1),alert("Could not submit. Try again.")}}(0,r.useEffect)(()=>{if(!a)return;let e=new AbortController;return c(null),(async()=>{try{let t=await fetch(`/api/page?id=${encodeURIComponent(a)}`,{cache:"no-store",signal:e.signal});if(!t.ok){c("Could not load the question."),u(""),f("no");return}let n=await t.json(),r=String(n.question??"").trim();c(r.length?r:" "),u(String(n.name??"").trim()),f("yes"===n.dodgeButton?"yes":"no")}catch(e){if(e?.name==="AbortError")return;c("Could not load the question."),u(""),f("no")}})(),()=>e.abort()},[a]),(0,r.useEffect)(()=>{if(window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches)return;let e=()=>{if(w.current)return;w.current=!0;let e=j.current;if(e){let t=e.getBoundingClientRect();C.current={x:t.left,y:t.top}}else C.current={x:window.innerWidth/2,y:window.innerHeight/2};x(!0)},t=t=>{N.current={x:t.clientX,y:t.clientY,has:!0},e()},n=t=>{let n=t.touches?.[0]||t.changedTouches?.[0];n&&(N.current={x:n.clientX,y:n.clientY,has:!0},e())};return window.addEventListener("mousemove",t,{passive:!0}),window.addEventListener("touchstart",n,{passive:!0}),window.addEventListener("touchmove",n,{passive:!0}),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("touchstart",n),window.removeEventListener("touchmove",n)}},[j]),(0,r.useEffect)(()=>{if(!y||window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches)return;let e=0,t=()=>{let n=R.current;if(!n){e=requestAnimationFrame(t);return}let r=n.offsetWidth,o=n.offsetHeight,a={minX:10,maxX:window.innerWidth-r-10,minY:10,maxY:window.innerHeight-o-10},s=N.current.x,u=N.current.y,l=C.current.x+r/2,c=C.current.y+o/2,d=l-s,h=c-u,m=Math.sqrt(d*d+h*h);if(N.current.has&&m<380){let e=28*(.4+(380-m)/380*1.7);C.current.x+=d/(m||1)*e,C.current.y+=h/(m||1)*e}C.current.x=i(C.current.x,a.minX,a.maxX),C.current.y=i(C.current.y,a.minY,a.maxY),n.style.transform=`translate(${C.current.x}px, ${C.current.y}px)`,e=requestAnimationFrame(t)};return e=requestAnimationFrame(t),()=>cancelAnimationFrame(e)},[y,R]);let T=(0,r.useMemo)(()=>{let e=null===l?"Loading...":l||" ",t=s?`${s}, `:"";return`${t}${e}`},[s,l]),A="yes"===m,E="no"===m;return(0,t.jsx)("main",{className:"page",children:(0,t.jsxs)("section",{className:"hero heroCenter",children:[(0,t.jsx)("div",{className:"topMedia","aria-hidden":"true",children:(0,t.jsx)("img",{src:"/images/hero-invite.png",alt:"",className:"heroImage",loading:"eager"})}),(0,t.jsx)("h1",{className:"questionTitle",children:T}),(0,t.jsxs)("div",{className:"buttonRow",children:[(0,t.jsx)("button",{ref:p,className:`btnChoice btnChoiceWide ${y&&A?"noPlaceholderHidden":""}`,type:"button",onClick:()=>S("yes"),disabled:d||!a||y&&A,"aria-disabled":d||!a||y&&A,title:y&&A?"Nice try ðŸ˜„":"",children:d?"Sending...":"Yes"}),(0,t.jsx)("button",{ref:g,className:`btnChoice btnChoiceWide ${y&&E?"noPlaceholderHidden":""}`,type:"button",onClick:()=>S("no"),disabled:d||!a||y&&E,"aria-disabled":d||!a||y&&E,title:y&&E?"Nice try ðŸ˜„":"",children:"No"})]}),(0,t.jsx)("p",{className:"tinyFooter",children:"no"===m?"P.S. The No button is on a personal growth journey. Itâ€™s not ready yet.":"P.S. The Yes button is shy today. Youâ€™ll have to work for it."}),y&&A?(0,t.jsx)("button",{ref:b,className:"btnChoice btnNoFloating",type:"button",disabled:!0,"aria-disabled":"true",title:"Nice try ðŸ˜„",style:{position:"fixed",left:0,top:0,transform:"translate(0px, 0px)",touchAction:"none"},children:"Yes"}):null,y&&E?(0,t.jsx)("button",{ref:v,className:"btnChoice btnNoFloating",type:"button",disabled:!0,"aria-disabled":"true",title:"Nice try ðŸ˜„",style:{position:"fixed",left:0,top:0,transform:"translate(0px, 0px)",touchAction:"none"},children:"No"}):null]})})}e.s(["default",()=>o])}]);